#!/usr/bin/env bash

if [ -z "${1}" ]; then
	tmp="$(basename $(dirname $(pwd)))/$(basename $(pwd))"
	session_name=$(echo ${tmp} | tr . _)
else
	session_name="${1}"
fi

check=$(tmux ls 2>/dev/null | grep -c "${session_name}")

if [ "${check}" = '0' ]; then
	if [ -n "${TMUX}" ] ; then
		tmux new-session -s "${session_name}" -c "${PWD}" -d 2>/dev/null
	else
		tmux new-session -s "${session_name}" 2>/dev/null
	fi
fi

if [ -z "${TMUX}" ]; then
	tmux att -t ${session_name} 2>/dev/null
else
	tmux switchc -t ${session_name} 2>/dev/null
fi
