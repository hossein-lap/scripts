#!/bin/sh

fzf="fzf -i --no-unicode --prompt=: --info=inline --header-first --header tmux-sessions --height 10% --reverse"
list=$(tmux list-sessions 2>/dev/null | awk -F ':' '{print $1;}')

if [ -z "${list}" ]; then
	echo "tmux: No active session(s)" > /dev/stderr
	exit 1
else
	session_name=$(echo ${list} | tr ' ' '\n' | ${fzf})
fi

if [ -z "${session_name}" ]; then
	exit 2
fi

if [ -z "${TMUX}" ]; then
	tmux att -t ${session_name} 2> /dev/null
else
	tmux switchc -t ${session_name} 2> /dev/null
fi
