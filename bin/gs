#!/bin/sh

list="add commit remove branch stash diff log"

runner="fzf"
args="-i --no-unicode --prompt=: --info=inline --header-first --header tmux-sessions --height 10% --reverse"

set_user() {
    options="pers-hos pers-pj work-hos work-pj"
    choice=$(echo ${options} | tr ' ' '\n' | ${runner} ${args} --header 'git user/email config')

    case ${choice} in
        pers-pj)
            username='primejade'
            email='primejade@proton.me'
            git config core.sshCommand 'ssh -i ~/.ssh/id_ed25520'
            ;;
        pers-hos)
            username='Hossein Esmail'
            email='hosteam01@gmail.com'
            ;;
        work-hos)
            username='Hossein Esmailzadeh'
            email='h.esmailzadeh@sinacomsys.com'
            ;;
        work-pj)
            username='primejade'
            email='hosteam01@gmail.com'
            ;;
        *)
            echo Nothing has changed
            exit 0
            ;;
    esac
    
    if [ $? -eq 0 ]; then
        git config user.name "${username}"
        git config user.email "${email}"
        echo "Username: ${username}"
        echo "Email: ${email}"
        printf 'gs: git user set: %s\n' ${choice}
    else
        exit 1
    fi
}

main() {
    options="hos pj"
    choice=$(echo ${options} | tr ' ' '\n' | ${runner} ${args} --header 'git options')
    echo ${choice}
}

set_user

